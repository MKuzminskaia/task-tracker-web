<!doctype html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8"/>
    <title>Task Tracker</title>

    <style>
        .alert { padding: 8px 12px; margin: 10px 0; border-radius: 6px; }
        .alert-error { background: #ffebee; color: #b00020; border: 1px solid #ffcdd2; }
        .alert-success { background: #e8f5e9; color: #1b5e20; border: 1px solid #c8e6c9; }
    </style>
</head>
<body>

<p th:if="${error}" class="alert alert-error" th:text="${error}"> </p>
<p th:if="${msg}" class="alert alert-success" th:text="${msg}"> </p>

<h1>Task Tracker</h1>

<form method="post" action="/tasks" >

    <input name = "title" maxlength="60" required placeholder="New Task">
    <select name = "priority">
        <option>LOW</option>
        <option>MEDIUM</option>
        <option>HIGH</option>
        <option>CRITICAL</option>
    </select>
    <button type = "submit">OK</button>
</form>



<h2>Tasks:</h2>



<table>
    <thead>
        <tr>
             <th>Id</th>
             <th>Task</th>
             <th>Priority</th>
             <th>Status</th>
        </tr>
    </thead>
    <tbody>
        <tr th:each="t : ${tasks}" >
            <td th:text="${t.id}"></td>
            <td th:text="${t.title}"></td>
            <td th:text="${t.priority}"></td>
            <td th:text="${t.status}"></td>
            <td> <form method="post" action="/tasks/process" th:if="${t.status.name() != 'IN_PROCESS' && t.status.name() != 'DONE'}"> <input type="hidden" name = "id" th:value="${t.id}"><button type="submit"> Start </button> </form> </td>
            <td> <form method="post" action="/tasks/done" th:if="${t.status.name() != 'DONE'}"> <input type="hidden" name = "id" th:value="${t.id}"><button type="submit"> Done </button> </form> </td>
            <td> <form method="post" action="/tasks/delete"> <input type="hidden" name = "id" th:value="${t.id}"><button type="submit"> Delete </button> </form> </td>
        </tr>
    </tbody>
</table>
</body>
</html>
